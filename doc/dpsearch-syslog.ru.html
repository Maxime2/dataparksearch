<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Использование syslog</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="DataparkSearch Engine 4.54"
HREF="index.ru.html"><LINK
REL="UP"
TITLE="Индексирование"
HREF="dpsearch-indexing.ru.html"><LINK
REL="PREVIOUS"
TITLE="Расширенные возможности индексирования"
HREF="dpsearch-extended-indexing.ru.html"><LINK
REL="NEXT"
TITLE="Хранение сжатых копий документов
"
HREF="dpsearch-stored.ru.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="datapark.css"><META
NAME="Description"
CONTENT="DataparkSearch - Полнофункциональная поисковая машина для Интернета и Интранета с открытым исходным кодом. Распространяется по лицензии GNU."><META
NAME="Keywords"
CONTENT="shareware, freeware, интернет, unix, поисковик, поисковая машина, поиск, поиск информации, интранет, open source, opensource, search, searching, software, udmsearch, engine, indexing, system, web, ftp, http, cgi, php, SQL, MySQL, database, php3, FreeBSD, Linux, Unix, DataparkSearch, MacOS X, Mac OS X, Windows, 2000, NT, 95, 98, GNU, GPL, url, grabbing"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000C4"
VLINK="#1200B2"
ALINK="#C40000"
><!--#include virtual="body-before.html"--><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>DataparkSearch Engine 4.54: Справочное руководство</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="dpsearch-extended-indexing.ru.html"
ACCESSKEY="P"
>&#1055;&#1088;&#1077;&#1076;.</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>&#1043;&#1083;&#1072;&#1074;&#1072; 3. Индексирование</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="dpsearch-stored.ru.html"
ACCESSKEY="N"
>&#1057;&#1083;&#1077;&#1076;.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="SYSLOG"
>3.12. Использование syslog</A
></H1
><A
NAME="AEN3098"
></A
><A
NAME="AEN3100"
></A
><P
>Все приложения <SPAN
CLASS="APPLICATION"
>DataparkSearch</SPAN
> по-умолчанию используют syslog
	для протоколирования своих действий, ошибок и прочих сообщений.
	indexer поддерживает несколько уровней подробности выдачи сообщений,
	которые могут быть заданы поцией -v или командой <B
CLASS="COMMAND"
>LogLevel</B
> в файле конфигурации:</P
><DIV
CLASS="TABLE"
><A
NAME="AEN3106"
></A
><P
><B
>&#1058;&#1072;&#1073;&#1083;&#1080;&#1094;&#1072; 3-2. уровни подробности сообщений indexer'а</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><TBODY
><TR
><TD
>0</TD
><TD
>SILENT</TD
><TD
>Подавить весь вывод</TD
></TR
><TR
><TD
>1</TD
><TD
>ERROR</TD
><TD
>только критические ошибки</TD
></TR
><TR
><TD
>2</TD
><TD
>WARNING</TD
><TD
>предупреждения</TD
></TR
><TR
><TD
>3</TD
><TD
>INFO</TD
><TD
>Сообщения информационного характера. Используется по-умолчанию.</TD
></TR
><TR
><TD
>4</TD
><TD
>EXTRA</TD
><TD
>Дополнительный информационный вывод</TD
></TR
><TR
><TD
>5</TD
><TD
>DEBUG</TD
><TD
>Отладочный вывод</TD
></TR
></TBODY
></TABLE
></DIV
><P
>Параллельно с записью в syslog, indexer так же производит
вывод на stdout/stderr. Чтобы подавить этот вывод, например, при запуске
из cron, используйте опцию -l. Если Вы не хотите использовать syslog,
то при запуске configure можно указать флаг <TT
CLASS="LITERAL"
>--disable-syslog</TT
>.
Собраный таким образом, indexer будет использовать только stdout/stderr для
вывода своих сообщений.
	</P
><P
>Syslog использует различные "facilities", чтобы направлять
вывод от разных програм в разные логи. По-умолчанию indexer исполтьзует
facility LOCAL7, который можно поменять во время сборки, указав configure опцию
<TT
CLASS="LITERAL"
>--enable-syslog=LOG_FACILITY</TT
>. LOG_FACILITY
должен быть правильным именем facility, которые обычно перечислены в
заголовочном файле <TT
CLASS="FILENAME"
>/usr/include/sys/syslog.h</TT
>
	</P
><P
>Вы можете отредактировать файл <TT
CLASS="FILENAME"
>/etc/syslog.conf</TT
>,
	чтобы перенаправить сообщения <SPAN
CLASS="APPLICATION"
>DataparkSearch</SPAN
> в желаемые файлы. Например,
	<PRE
CLASS="PROGRAMLISTING"
># Log all messages from DataparkSearch to separate file
local7.*        -/var/log/DataparkSearch.log</PRE
>
	</P
><P
>Еще пример:
	<PRE
CLASS="PROGRAMLISTING"
># Send all DataparkSearch messages to host named central
# Syslog on central should be configured to allow this
local7.*        @central</PRE
>
	</P
><P
>По-умолчанию, все сообщения пишутся так же в лог-файл
<TT
CLASS="LITERAL"
>/var/log/messages</TT
>. Чтобы избежать этого, добавьте
local7.none or local7.!* (игнорировать любые сообщения с facility local7) в
Ваши 'catch-all' лог-файлы.</P
><P
>For example:
	<PRE
CLASS="PROGRAMLISTING"
>#
# Some `catch-all' logfiles.
#
*.=info;*.=notice;*.=warn;\
        auth,authpriv.none;\
        cron,daemon.none;\
        mail,news.none;\
        local7.!*               -/var/log/messages</PRE
>
	</P
><P
>Для получения более подробной справки о syslog и его
	конфигурации, посмотрите страницы man syslogd(8) и syslog.conf(5).
	</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="dpsearch-extended-indexing.ru.html"
ACCESSKEY="P"
>&#1055;&#1088;&#1077;&#1076;.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.ru.html"
ACCESSKEY="H"
>&#1053;&#1072;&#1095;&#1072;&#1083;&#1086;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="dpsearch-stored.ru.html"
ACCESSKEY="N"
>&#1057;&#1083;&#1077;&#1076;.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Расширенные возможности индексирования</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="dpsearch-indexing.ru.html"
ACCESSKEY="U"
>&#1059;&#1088;&#1086;&#1074;&#1077;&#1085;&#1100; &#1074;&#1099;&#1096;&#1077;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Хранение сжатых копий документов
<A
NAME="AEN3152"
></A
></TD
></TR
></TABLE
></DIV
><!--#include virtual="body-after.html"--></BODY
></HTML
>