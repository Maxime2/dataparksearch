<sect1 id="sql-stor">
	<title>SQL storage types</title>
	<sect2 id="sql-stor-general">
		<title>General storage information</title>
		<para><application>DataparkSearch</application> stores every words found in any defined section of
document. The count of word appearance in the document does not affect
it's weight. But the fact whether the word appears in more important
parts of the document (title, description, etc.) is taken in account however. </para>

	</sect2>
	<sect2 id="sql-stor-modes">
		<title>Various modes of words storage</title>
		<para>There are different modes of word storage which
are currently supported by <application>DataparkSearch</application>:
"single", "multi", "crc", "crc-multi", "cache". Default mode is "cache". Mode is
to be selected by <option>dbmode</option> parameter of <command>DBAddr</command> command in both
<filename>indexer.conf</filename> and <filename>search.htm</filename>
files.</para>

		<programlisting>
Examples:
DBAddr mysql://localhost/search/?dbmode=single
DBAddr mysql://localhost/search/?dbmode=multi
DBAddr mysql://localhost/search/?dbmode=crc
DBAddr mysql://localhost/search/?dbmode=crc-multi
</programlisting>

	</sect2>

	<sect2 id="sql-stor-single">
		<title>Storage mode - single</title>
                 <indexterm><primary>Storage modes</primary><secondary>single mode</secondary></indexterm>
                
		<para>When "single" is specified, all words are stored
in one table  with structure
(url_id,word,weight), where url_id is  the ID of the document which is
referenced by rec_id field in "url" table. Word has <literal>variable
char(32)</literal> SQL type.</para>

	</sect2>
	<sect2 id="sql-stor-multi">
		<title>Storage mode - multi</title>
                 <indexterm><primary>Storage modes</primary><secondary>multi mode</secondary></indexterm>
                
		<para>If "multi" is selected, words will be located in
different 13 tables depending of their lengths. Structures of these
tables are the same with "single" mode, but fixed length char type is
used, which is usually faster in most databases. This fact makes
"multi" mode usually faster comparing with "single" mode. </para>

	</sect2>
	<sect2 id="sql-stor-crc">
		<title>Storage mode - crc</title>
                 <indexterm><primary>Storage modes</primary><secondary>crc mode</secondary></indexterm>
                
		<para>If "crc" mode is selected, <application>DataparkSearch</application> will
store 32 bit integer word IDs calculated by HASH32 algorithm instead of
words. This mode requires less disc space and is faster than "single"
and "multi" modes. <application>DataparkSearch</application> uses the fact that HASH32 calculates
quite unique check sums for different words. According to our tests
there are only 250 pairs of words have the same HASH32 value in the list of
about 1.600.000 unique words. Most of these pairs (&gt;90%) have at
least one misspelled word. Words information is stored in the
structure (url_id,word_id,weight), where word_id is 32 bit integer ID
calculated by HASH32 algorithm. This mode is recommended for big search
engines. </para>

	</sect2>
	<sect2 id="sql-stor-crcmulti">
		<title>Storage mode - crc-multi</title>
                 <indexterm><primary>Storage modes</primary><secondary>crc-multi mode</secondary></indexterm>
                
		<para>When "crc-multi" mode is selected, <application>DataparkSearch</application>
stores HASH32 word IDs in several tables with the same to "crc" structures depending on word lengths
like in "multi" mode. This mode usually is the most fast and
recommended for big search engines.</para>

	</sect2>
	<sect2 id="sql-stor-structure">
		<title>SQL structure notes</title>
		<para>Please note that we develop <application>DataparkSearch</application> with
<application>PostgreSQL</application> as back-end and often have no possibility to test each version
with all of other supported databases. So, if there is no table
definition in create/you_database  directory, you may found <application>PostgreSQL</application>
definition for the same table and just adopt it for your
back-end. <application>PostgreSQL</application> table definitions are always up-to-date.</para>

	</sect2>
	<sect2 id="sql-stor-noncrc">
		<title>Additional features of non-CRC storage modes</title>
		<para>"single" and "multi" modes support substring search. As
far as "crc" and "crc-multi" do not store words themselves and use
integer values generated by HASH32 algorithm instead, there is no
possibility of substring search in these modes.</para>

	</sect2>
</sect1>
