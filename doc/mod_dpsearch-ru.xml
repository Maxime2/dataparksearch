<sect1 id="mod_dpsearch">
	<title>Модуль <literal>mod_dpsearch</literal> для Apache httpd
<indexterm><primary>mod_dpsearch</primary></indexterm>
<indexterm><primary>Команда</primary><secondary>DataparkSearchdConf</secondary></indexterm>
<indexterm><primary>Команда</primary><secondary>DataparkSearchTemplate</secondary></indexterm>
<indexterm><primary>Команда</primary><secondary>DataparkStoredocTemplate</secondary></indexterm>
</title>
	<para>Начиная с версии 4.19 <application>DataparkSearch</application> также предоставляет модуль для
веб-сервера <application>Apache</application>, реализующий возможности <command>searchd</command> и <command>search.cgi</command>.
</para>

	<sect2 id="mod_dpsearch-why">
		<title>Для чего использовать <literal>mod_dpsearch</literal></title>
		<itemizedlist>
			<listitem>
<para>Как и <command>searchd</command> (см. <xref linkend="searchd-why"/>), для ускорения поиска, <command>mod_dpsearch</command> может 
держать в памяти предварительно загруженными некоторые данные.
</para>
</listitem>

<listitem>
<para>В дополнение, <command>mod_dpsearch</command> держит в памяти последний использованый шаблон поиска. 
Тем саммым время поиска сокращается на время загрузки и разбора шаблона поиска для каждого поискового запроса начиная со второго.
</para>
</listitem>

<listitem>
<para>Сам модуль <command>mod_dpsearch</command> уже находится в памяти, когда приходит поисковый запрос от пользователя,
в то время как <filename>search.cgi</filename>, как правило, загружается с диска для каждого запроса.
</para>
</listitem>

		</itemizedlist>
	</sect2>

	<sect2 id="mod_dpsearch-cfg">
		<title>Конфигурирование <literal>mod_dpsearch</literal></title>


<para>Чтобы включить поддержку этой возможности, добавьте к <command>configure</command> ключ <option>--enable-apache-module</option>.
В добавление к основным программам, будет создана библиотека <literal>mod_dpsearch.so</literal>. Эта библиотека устанавливается
в дерево установки <application>Apache</application>. После этого вам необходимо активировать этот модуль добавив следующие
строчки в ваш файл конфигурации <application>Apache</application>:

<programlisting>
LoadModule dpsearch_module       libexec/mod_dpsearch.so
AddModule mod_dpsearch.c

&lt;Ifmodule mod_dpsearch.c&gt;
DataparkSearchdConf /usr/local/dpsearch/etc/modsearchd.conf
    &lt;Location /search&gt;
        SetHandler dpsearch
        DataparkSearchTemplate /usr/local/dpsearch/etc/modsearch.htm
    &lt;/Location&gt;
    &lt;Location /storedoc&gt;
        SetHandler dpstoredoc
        DataparkStoredocTemplate /usr/local/dpsearch/etc/modstoredoc.htm
    &lt;/Location&gt;
&lt;/IfModule&gt;
</programlisting>
</para>

<para>Этим модулем поддерживаются три директивы конфигурации: <option>DataparkSearchdConf</option>,
<option>DataparkSearchTemplate</option> и <option>DataparkStoredocTemplate</option>. 
Необязательная директива <option>DataparkSearchdConf</option> задаёт файл конфигурации, 
аналогичный файлу конфигурации для <command>searchd</command>. Для сервера может быть указана только один такой файл.
Директива <option>DataparkSearchdTemplate</option> указывает поисковый шаблон, аналогичный шаблону, используемому программой
<command>search.cgi</command>. 
Директива <option>DataparkStoredocTemplate</option> указывает шаблон, для отображения сохранённой копии документа,
аналогичный шаблону, используемому программой <command>storedoc.cgi</command>. 
Для сервера можут быть указано несколько директив <option>DataparkSearchdTemplate</option> и <option>DataparkStoredocTemplate</option>,
по одной для каждого Location. Если указана директива <option>DataparkSearchdConf</option>, то в поисковых шаблонах не нужно указывать
команды <option>DBAddr</option>.
</para>

	</sect2>

</sect1>

